{"ast":null,"code":"var _jsxFileName = \"/Users/parthzanwar/Desktop/Space Apps/public/src/components/PathVisualization.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VisualizationContainer = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 15px;\n  padding: 25px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n`;\n_c = VisualizationContainer;\nconst VisualizationHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n`;\n_c2 = VisualizationHeader;\nconst VisualizationTitle = styled.h3`\n  font-size: 18px;\n  font-weight: 600;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c3 = VisualizationTitle;\nconst ViewControls = styled.div`\n  display: flex;\n  gap: 10px;\n`;\n_c4 = ViewControls;\nconst ViewButton = styled.button`\n  background: ${props => props.active ? 'rgba(0, 255, 255, 0.2)' : 'rgba(255, 255, 255, 0.1)'};\n  border: 1px solid ${props => props.active ? '#00ffff' : 'rgba(255, 255, 255, 0.3)'};\n  padding: 6px 12px;\n  border-radius: 15px;\n  color: #ffffff;\n  font-size: 11px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: rgba(0, 255, 255, 0.2);\n    border-color: #00ffff;\n  }\n`;\n_c5 = ViewButton;\nconst CanvasContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 400px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n`;\n_c6 = CanvasContainer;\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n  cursor: grab;\n  \n  &:active {\n    cursor: grabbing;\n  }\n`;\n_c7 = Canvas;\nconst PathInfo = styled.div`\n  margin-top: 20px;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 15px;\n`;\n_c8 = PathInfo;\nconst InfoCard = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  padding: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n`;\n_c9 = InfoCard;\nconst InfoLabel = styled.div`\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.7);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 5px;\n`;\n_c0 = InfoLabel;\nconst InfoValue = styled.div`\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n`;\n_c1 = InfoValue;\nconst Legend = styled.div`\n  margin-top: 15px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n`;\n_c10 = Legend;\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.8);\n`;\n_c11 = LegendItem;\nconst LegendColor = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ${props => props.color};\n`;\n_c12 = LegendColor;\nconst PathSteps = styled.div`\n  margin-top: 20px;\n  max-height: 200px;\n  overflow-y: auto;\n`;\n_c13 = PathSteps;\nconst StepItem = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  padding: 10px;\n  margin-bottom: 8px;\n  border-left: 3px solid ${props => props.color};\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.8);\n`;\n_c14 = StepItem;\nfunction PathVisualization({\n  pathData,\n  analysisResult\n}) {\n  _s();\n  var _pathData$path;\n  const canvasRef = useRef(null);\n  const [viewMode, setViewMode] = useState('3d');\n  const [rotation, setRotation] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showOnImage, setShowOnImage] = useState(false);\n  const [zoom, setZoom] = useState(1.0);\n  const [pan, setPan] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isPanning, setIsPanning] = useState(false);\n  const [lastPanPos, setLastPanPos] = useState({\n    x: 0,\n    y: 0\n  });\n  const calculateBounds = useCallback(points => {\n    if (points.length === 0) return {\n      minX: 0,\n      maxX: 0,\n      minY: 0,\n      maxY: 0,\n      centerX: 0,\n      centerY: 0,\n      width: 0,\n      height: 0\n    };\n    const xCoords = points.map(p => p[0]);\n    const yCoords = points.map(p => p[1]);\n    const minX = Math.min(...xCoords);\n    const maxX = Math.max(...xCoords);\n    const minY = Math.min(...yCoords);\n    const maxY = Math.max(...yCoords);\n    return {\n      minX,\n      maxX,\n      minY,\n      maxY,\n      centerX: (minX + maxX) / 2,\n      centerY: (minY + maxY) / 2,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  }, []);\n  const drawAxes = useCallback((ctx, centerX, centerY, scale) => {\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\n    ctx.lineWidth = 1;\n\n    // X axis\n    ctx.beginPath();\n    ctx.moveTo(centerX - 50, centerY);\n    ctx.lineTo(centerX + 50, centerY);\n    ctx.stroke();\n\n    // Y axis\n    ctx.beginPath();\n    ctx.moveTo(centerX, centerY - 50);\n    ctx.lineTo(centerX, centerY + 50);\n    ctx.stroke();\n\n    // Labels\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';\n    ctx.font = '8px Inter, sans-serif';\n    ctx.textAlign = 'center';\n    ctx.fillText('X', centerX + 55, centerY + 3);\n    ctx.fillText('Y', centerX + 3, centerY - 55);\n  }, []);\n  const drawPathOverlay = useCallback((ctx, rect, imgX = 0, imgY = 0, imgWidth = 0, imgHeight = 0) => {\n    const points = pathData.visualization.points;\n    const connections = pathData.visualization.connections;\n    if (!points || points.length === 0) return;\n\n    // Calculate bounds\n    const bounds = calculateBounds(points);\n    const scale = Math.min(rect.width, rect.height) / Math.max(bounds.width, bounds.height) * 0.8;\n    const centerX = rect.width / 2;\n    const centerY = rect.height / 2;\n\n    // Project 3D points to 2D with view mode consideration\n    const projectedPoints = points.map(point => {\n      const [x, y, z] = point;\n      if (showOnImage && analysisResult && analysisResult.image_url) {\n        var _analysisResult$metad, _analysisResult$metad2, _analysisResult$metad3, _analysisResult$metad4;\n        // When showing on image, map path coordinates to image space\n        // Path coordinates are in image pixel space (x, y, z=0)\n        // We need to scale them to match the displayed image size\n\n        // Get the original image dimensions from the analysis result\n        const originalWidth = ((_analysisResult$metad = analysisResult.metadata) === null || _analysisResult$metad === void 0 ? void 0 : (_analysisResult$metad2 = _analysisResult$metad.image_size) === null || _analysisResult$metad2 === void 0 ? void 0 : _analysisResult$metad2[1]) || bounds.width;\n        const originalHeight = ((_analysisResult$metad3 = analysisResult.metadata) === null || _analysisResult$metad3 === void 0 ? void 0 : (_analysisResult$metad4 = _analysisResult$metad3.image_size) === null || _analysisResult$metad4 === void 0 ? void 0 : _analysisResult$metad4[0]) || bounds.height;\n\n        // Scale the path coordinates to match the displayed image\n        const scaleX = imgWidth / originalWidth;\n        const scaleY = imgHeight / originalHeight;\n\n        // Apply scaling and positioning\n        const imageX = imgX + x * scaleX;\n        const imageY = imgY + y * scaleY;\n        console.log('Path point mapping:', {\n          originalPoint: [x, y, z],\n          originalImageSize: [originalWidth, originalHeight],\n          displayImageSize: [imgWidth, imgHeight],\n          scale: [scaleX, scaleY],\n          imagePosition: [imgX, imgY],\n          mappedPoint: [imageX, imageY]\n        });\n        return {\n          x: imageX,\n          y: imageY,\n          z: 0\n        };\n      }\n      if (viewMode === '2d') {\n        // Simple 2D projection (ignore Z) with zoom and pan\n        const projectedX = centerX + (x - bounds.centerX) * scale * zoom + pan.x;\n        const projectedY = centerY + (y - bounds.centerY) * scale * zoom + pan.y;\n        return {\n          x: projectedX,\n          y: projectedY,\n          z: 0\n        };\n      } else {\n        // 3D perspective projection with rotation (improved) and zoom\n        const cosX = Math.cos(rotation.x * 0.5);\n        const sinX = Math.sin(rotation.x * 0.5);\n        const cosY = Math.cos(rotation.y * 0.5);\n        const sinY = Math.sin(rotation.y * 0.5);\n\n        // Apply rotation with better scaling\n        const rotatedX = x * cosY - z * sinY;\n        const rotatedY = y * cosX + (x * sinY + z * cosY) * sinX;\n        const rotatedZ = (x * sinY + z * cosY) * cosX - y * sinX;\n\n        // Perspective projection with better depth handling and zoom\n        const perspective = 1000;\n        const depth = Math.max(1, rotatedZ + perspective);\n        const projectedX = centerX + rotatedX / depth * scale * 200 * zoom + pan.x;\n        const projectedY = centerY + rotatedY / depth * scale * 200 * zoom + pan.y;\n        return {\n          x: projectedX,\n          y: projectedY,\n          z: rotatedZ\n        };\n      }\n    });\n\n    // Draw connections\n    ctx.strokeStyle = 'rgba(0, 255, 255, 0.6)';\n    ctx.lineWidth = 2;\n    ctx.setLineDash([5, 5]);\n    for (const connection of connections) {\n      const [startIdx, endIdx] = connection;\n      if (startIdx < projectedPoints.length && endIdx < projectedPoints.length) {\n        const start = projectedPoints[startIdx];\n        const end = projectedPoints[endIdx];\n        ctx.beginPath();\n        ctx.moveTo(start.x, start.y);\n        ctx.lineTo(end.x, end.y);\n        ctx.stroke();\n      }\n    }\n\n    // Reset line dash\n    ctx.setLineDash([]);\n\n    // Draw points\n    projectedPoints.forEach((point, index) => {\n      var _pathData$visualizati;\n      const isStart = index === 0;\n      const isEnd = index === projectedPoints.length - 1;\n      const metadata = (_pathData$visualizati = pathData.visualization.metadata) === null || _pathData$visualizati === void 0 ? void 0 : _pathData$visualizati[index - 1]; // -1 because start point has no metadata\n\n      let color, radius;\n      if (isStart) {\n        color = '#00ff00';\n        radius = 8;\n      } else if (isEnd && projectedPoints.length > 2) {\n        color = '#ff0000';\n        radius = 8;\n      } else {\n        // Intermediate debris points\n        const isFeasible = metadata === null || metadata === void 0 ? void 0 : metadata.feasible;\n        color = isFeasible ? '#00ffff' : '#ff8800';\n        radius = 6;\n      }\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.arc(point.x, point.y, radius, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Draw labels\n      if (isStart || isEnd || metadata && metadata.feasible) {\n        ctx.fillStyle = color;\n        ctx.font = '10px Inter, sans-serif';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'bottom';\n        const label = isStart ? 'START' : isEnd && projectedPoints.length > 2 ? 'END' : metadata ? `D${metadata.debris_id || index}` : `D${index}`;\n        ctx.fillText(label, point.x, point.y - radius - 10);\n      }\n    });\n\n    // Draw coordinate axes (only in 3D mode and not on image)\n    if (viewMode === '3d' && !showOnImage) {\n      drawAxes(ctx, centerX, centerY, scale);\n    }\n  }, [pathData, viewMode, rotation, showOnImage, zoom, pan, analysisResult, calculateBounds, drawAxes]);\n  const drawPath = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !pathData.visualization) return;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    const dpr = window.devicePixelRatio || 1;\n    canvas.width = rect.width * dpr;\n    canvas.height = rect.height * dpr;\n    ctx.scale(dpr, dpr);\n    canvas.style.width = rect.width + 'px';\n    canvas.style.height = rect.height + 'px';\n\n    // Clear canvas or draw background image\n    if (showOnImage && analysisResult && analysisResult.image_url) {\n      var _analysisResult$metad5;\n      console.log('Drawing image with path overlay:', {\n        showOnImage,\n        imageUrl: analysisResult.image_url,\n        imageSize: (_analysisResult$metad5 = analysisResult.metadata) === null || _analysisResult$metad5 === void 0 ? void 0 : _analysisResult$metad5.image_size,\n        pathData: pathData.visualization\n      });\n\n      // Draw the original image as background with zoom and pan\n      const img = new Image();\n      img.onload = () => {\n        // Calculate image dimensions with zoom\n        const imgWidth = img.width * zoom;\n        const imgHeight = img.height * zoom;\n\n        // Calculate image position with pan\n        const imgX = (rect.width - imgWidth) / 2 + pan.x;\n        const imgY = (rect.height - imgHeight) / 2 + pan.y;\n        console.log('Image loaded, dimensions:', {\n          originalWidth: img.width,\n          originalHeight: img.height,\n          displayWidth: imgWidth,\n          displayHeight: imgHeight,\n          imgX,\n          imgY\n        });\n\n        // Clear canvas\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';\n        ctx.fillRect(0, 0, rect.width, rect.height);\n\n        // Draw image with zoom and pan\n        ctx.drawImage(img, imgX, imgY, imgWidth, imgHeight);\n\n        // Draw path overlay with same zoom and pan\n        drawPathOverlay(ctx, rect, imgX, imgY, imgWidth, imgHeight);\n      };\n      img.onerror = error => {\n        console.error('Failed to load image:', error, analysisResult.image_url);\n      };\n      img.src = analysisResult.image_url;\n      return;\n    } else {\n      // Clear canvas with background\n      ctx.fillStyle = viewMode === '3d' ? 'rgba(0, 0, 20, 0.3)' : 'rgba(0, 0, 0, 0.1)';\n      ctx.fillRect(0, 0, rect.width, rect.height);\n    }\n    drawPathOverlay(ctx, rect);\n  }, [pathData, viewMode, showOnImage, zoom, pan, analysisResult, drawPathOverlay]);\n  useEffect(() => {\n    if (pathData && pathData.visualization) {\n      drawPath();\n    }\n  }, [pathData, viewMode, rotation, showOnImage, zoom, pan, drawPath]);\n\n  // Add non-passive wheel event listener\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const handleWheel = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      const delta = e.deltaY > 0 ? 0.9 : 1.1;\n      setZoom(prev => Math.max(0.1, Math.min(10, prev * delta)));\n    };\n\n    // Add event listener with passive: false\n    canvas.addEventListener('wheel', handleWheel, {\n      passive: false\n    });\n    return () => {\n      canvas.removeEventListener('wheel', handleWheel);\n    };\n  }, []);\n  const handleCanvasMouseMove = e => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    if (isPanning) {\n      // Handle panning\n      const deltaX = e.clientX - lastPanPos.x;\n      const deltaY = e.clientY - lastPanPos.y;\n      setPan(prev => ({\n        x: prev.x + deltaX,\n        y: prev.y + deltaY\n      }));\n      setLastPanPos({\n        x: e.clientX,\n        y: e.clientY\n      });\n    } else if (viewMode === '3d' && !showOnImage) {\n      // Handle 3D rotation\n      const x = (e.clientX - rect.left) / rect.width;\n      const y = (e.clientY - rect.top) / rect.height;\n      setRotation({\n        x: (y - 0.5) * Math.PI,\n        y: (x - 0.5) * Math.PI\n      });\n    }\n  };\n  const handleCanvasMouseDown = e => {\n    if (e.button === 1 || e.button === 0 && e.ctrlKey) {\n      // Middle mouse or Ctrl+left click for panning\n      setIsPanning(true);\n      setLastPanPos({\n        x: e.clientX,\n        y: e.clientY\n      });\n      e.preventDefault();\n    } else if (e.button === 0 && viewMode === '3d' && !showOnImage) {\n      // Left click for 3D rotation\n      // setIsDragging(true);\n      // setLastMousePos({ x: e.clientX, y: e.clientY });\n    }\n  };\n  const handleCanvasMouseUp = () => {\n    // setIsDragging(false);\n    setIsPanning(false);\n  };\n  const resetView = () => {\n    setZoom(1.0);\n    setPan({\n      x: 0,\n      y: 0\n    });\n    setRotation({\n      x: 0,\n      y: 0\n    });\n  };\n  if (!pathData || !pathData.visualization) {\n    return /*#__PURE__*/_jsxDEV(VisualizationContainer, {\n      children: [/*#__PURE__*/_jsxDEV(VisualizationHeader, {\n        children: /*#__PURE__*/_jsxDEV(VisualizationTitle, {\n          children: \"\\uD83D\\uDDFA\\uFE0F Path Visualization\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '40px',\n          color: 'rgba(255, 255, 255, 0.5)'\n        },\n        children: \"No path data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this);\n  }\n  const metrics = pathData.metrics || {};\n  return /*#__PURE__*/_jsxDEV(VisualizationContainer, {\n    children: [/*#__PURE__*/_jsxDEV(VisualizationHeader, {\n      children: [/*#__PURE__*/_jsxDEV(VisualizationTitle, {\n        children: \"\\uD83D\\uDDFA\\uFE0F Path Visualization\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ViewControls, {\n        children: [/*#__PURE__*/_jsxDEV(ViewButton, {\n          active: viewMode === '3d',\n          onClick: () => setViewMode('3d'),\n          children: \"3D View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ViewButton, {\n          active: viewMode === '2d',\n          onClick: () => setViewMode('2d'),\n          children: \"2D View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ViewButton, {\n          active: showOnImage,\n          onClick: () => setShowOnImage(!showOnImage),\n          children: \"\\uD83D\\uDCF8 On Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ViewButton, {\n          onClick: () => setZoom(prev => Math.min(10, prev * 1.2)),\n          title: \"Zoom In\",\n          children: \"\\uD83D\\uDD0D+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ViewButton, {\n          onClick: () => setZoom(prev => Math.max(0.1, prev * 0.8)),\n          title: \"Zoom Out\",\n          children: \"\\uD83D\\uDD0D-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ViewButton, {\n          onClick: resetView,\n          title: \"Reset View\",\n          children: \"\\uD83C\\uDFE0 Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CanvasContainer, {\n      children: /*#__PURE__*/_jsxDEV(Canvas, {\n        ref: canvasRef,\n        onMouseMove: handleCanvasMouseMove,\n        onMouseDown: handleCanvasMouseDown,\n        onMouseUp: handleCanvasMouseUp,\n        style: {\n          touchAction: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {\n      children: [/*#__PURE__*/_jsxDEV(LegendItem, {\n        children: [/*#__PURE__*/_jsxDEV(LegendColor, {\n          color: \"#00ff00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Start Position\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LegendItem, {\n        children: [/*#__PURE__*/_jsxDEV(LegendColor, {\n          color: \"#00ffff\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Feasible Debris\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LegendItem, {\n        children: [/*#__PURE__*/_jsxDEV(LegendColor, {\n          color: \"#ffaa00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Non-feasible\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LegendItem, {\n        children: [/*#__PURE__*/_jsxDEV(LegendColor, {\n          color: \"#ff0000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"End Position\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LegendItem, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '12px',\n            height: '2px',\n            background: 'rgba(0, 255, 255, 0.6)',\n            margin: '5px 0'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Path Connection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LegendItem, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDD0D Zoom: \", Math.round(zoom * 100), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LegendItem, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Controls: Scroll=Zoom, Ctrl+Drag=Pan, Drag=Rotate(3D)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 9\n      }, this), showOnImage && /*#__PURE__*/_jsxDEV(LegendItem, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83D\\uDCF8 Image Mode: Zoom and pan work with the image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PathInfo, {\n      children: [/*#__PURE__*/_jsxDEV(InfoCard, {\n        children: [/*#__PURE__*/_jsxDEV(InfoLabel, {\n          children: \"Path Length\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InfoValue, {\n          children: [pathData.path_length || 0, \" steps\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfoCard, {\n        children: [/*#__PURE__*/_jsxDEV(InfoLabel, {\n          children: \"Total Distance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InfoValue, {\n          children: metrics.total_distance ? `${(metrics.total_distance / 1000).toFixed(1)} km` : '0 km'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfoCard, {\n        children: [/*#__PURE__*/_jsxDEV(InfoLabel, {\n          children: \"Mission Time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InfoValue, {\n          children: metrics.total_time ? `${(metrics.total_time / 3600).toFixed(1)} hours` : '0 hours'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfoCard, {\n        children: [/*#__PURE__*/_jsxDEV(InfoLabel, {\n          children: \"Fuel Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InfoValue, {\n          children: metrics.total_fuel ? `${metrics.total_fuel.toFixed(1)} kg` : '0 kg'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PathSteps, {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          color: '#ffffff',\n          marginBottom: '10px',\n          fontSize: '14px'\n        },\n        children: \"Path Steps:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }, this), (_pathData$path = pathData.path) === null || _pathData$path === void 0 ? void 0 : _pathData$path.map((step, index) => /*#__PURE__*/_jsxDEV(StepItem, {\n        color: index === 0 ? '#00ff00' : index === pathData.path.length - 1 ? '#ff0000' : '#00ffff',\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Step \", step.step, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 13\n        }, this), \" \", index === 0 ? 'Start' : `Debris ${step.debris_id}`, step.distance_from_previous && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            float: 'right',\n            color: 'rgba(255, 255, 255, 0.6)'\n          },\n          children: [step.distance_from_previous.toFixed(1), \"m\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 497,\n    columnNumber: 5\n  }, this);\n}\n_s(PathVisualization, \"eVBH4JhjrWHd6KzCFi+Iyv5Mui8=\");\n_c15 = PathVisualization;\nexport default PathVisualization;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15;\n$RefreshReg$(_c, \"VisualizationContainer\");\n$RefreshReg$(_c2, \"VisualizationHeader\");\n$RefreshReg$(_c3, \"VisualizationTitle\");\n$RefreshReg$(_c4, \"ViewControls\");\n$RefreshReg$(_c5, \"ViewButton\");\n$RefreshReg$(_c6, \"CanvasContainer\");\n$RefreshReg$(_c7, \"Canvas\");\n$RefreshReg$(_c8, \"PathInfo\");\n$RefreshReg$(_c9, \"InfoCard\");\n$RefreshReg$(_c0, \"InfoLabel\");\n$RefreshReg$(_c1, \"InfoValue\");\n$RefreshReg$(_c10, \"Legend\");\n$RefreshReg$(_c11, \"LegendItem\");\n$RefreshReg$(_c12, \"LegendColor\");\n$RefreshReg$(_c13, \"PathSteps\");\n$RefreshReg$(_c14, \"StepItem\");\n$RefreshReg$(_c15, \"PathVisualization\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","styled","jsxDEV","_jsxDEV","VisualizationContainer","div","_c","VisualizationHeader","_c2","VisualizationTitle","h3","_c3","ViewControls","_c4","ViewButton","button","props","active","_c5","CanvasContainer","_c6","Canvas","canvas","_c7","PathInfo","_c8","InfoCard","_c9","InfoLabel","_c0","InfoValue","_c1","Legend","_c10","LegendItem","_c11","LegendColor","color","_c12","PathSteps","_c13","StepItem","_c14","PathVisualization","pathData","analysisResult","_s","_pathData$path","canvasRef","viewMode","setViewMode","rotation","setRotation","x","y","showOnImage","setShowOnImage","zoom","setZoom","pan","setPan","isPanning","setIsPanning","lastPanPos","setLastPanPos","calculateBounds","points","length","minX","maxX","minY","maxY","centerX","centerY","width","height","xCoords","map","p","yCoords","Math","min","max","drawAxes","ctx","scale","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","fillStyle","font","textAlign","fillText","drawPathOverlay","rect","imgX","imgY","imgWidth","imgHeight","visualization","connections","bounds","projectedPoints","point","z","image_url","_analysisResult$metad","_analysisResult$metad2","_analysisResult$metad3","_analysisResult$metad4","originalWidth","metadata","image_size","originalHeight","scaleX","scaleY","imageX","imageY","console","log","originalPoint","originalImageSize","displayImageSize","imagePosition","mappedPoint","projectedX","projectedY","cosX","cos","sinX","sin","cosY","sinY","rotatedX","rotatedY","rotatedZ","perspective","depth","setLineDash","connection","startIdx","endIdx","start","end","forEach","index","_pathData$visualizati","isStart","isEnd","radius","isFeasible","feasible","arc","PI","fill","textBaseline","label","debris_id","drawPath","current","getContext","getBoundingClientRect","dpr","window","devicePixelRatio","style","_analysisResult$metad5","imageUrl","imageSize","img","Image","onload","displayWidth","displayHeight","fillRect","drawImage","onerror","error","src","handleWheel","e","preventDefault","stopPropagation","delta","deltaY","prev","addEventListener","passive","removeEventListener","handleCanvasMouseMove","deltaX","clientX","clientY","left","top","handleCanvasMouseDown","ctrlKey","handleCanvasMouseUp","resetView","children","fileName","_jsxFileName","lineNumber","columnNumber","padding","metrics","onClick","title","ref","onMouseMove","onMouseDown","onMouseUp","touchAction","background","margin","round","path_length","total_distance","toFixed","total_time","total_fuel","marginBottom","fontSize","path","step","distance_from_previous","float","_c15","$RefreshReg$"],"sources":["/Users/parthzanwar/Desktop/Space Apps/public/src/components/PathVisualization.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from 'styled-components';\n\nconst VisualizationContainer = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 15px;\n  padding: 25px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n`;\n\nconst VisualizationHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n`;\n\nconst VisualizationTitle = styled.h3`\n  font-size: 18px;\n  font-weight: 600;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst ViewControls = styled.div`\n  display: flex;\n  gap: 10px;\n`;\n\nconst ViewButton = styled.button`\n  background: ${props => props.active ? 'rgba(0, 255, 255, 0.2)' : 'rgba(255, 255, 255, 0.1)'};\n  border: 1px solid ${props => props.active ? '#00ffff' : 'rgba(255, 255, 255, 0.3)'};\n  padding: 6px 12px;\n  border-radius: 15px;\n  color: #ffffff;\n  font-size: 11px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: rgba(0, 255, 255, 0.2);\n    border-color: #00ffff;\n  }\n`;\n\nconst CanvasContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 400px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n`;\n\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n  cursor: grab;\n  \n  &:active {\n    cursor: grabbing;\n  }\n`;\n\nconst PathInfo = styled.div`\n  margin-top: 20px;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 15px;\n`;\n\nconst InfoCard = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  padding: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n`;\n\nconst InfoLabel = styled.div`\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.7);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 5px;\n`;\n\nconst InfoValue = styled.div`\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n`;\n\nconst Legend = styled.div`\n  margin-top: 15px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n`;\n\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.8);\n`;\n\nconst LegendColor = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ${props => props.color};\n`;\n\nconst PathSteps = styled.div`\n  margin-top: 20px;\n  max-height: 200px;\n  overflow-y: auto;\n`;\n\nconst StepItem = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  padding: 10px;\n  margin-bottom: 8px;\n  border-left: 3px solid ${props => props.color};\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.8);\n`;\n\nfunction PathVisualization({ pathData, analysisResult }) {\n  const canvasRef = useRef(null);\n  const [viewMode, setViewMode] = useState('3d');\n  const [rotation, setRotation] = useState({ x: 0, y: 0 });\n  const [showOnImage, setShowOnImage] = useState(false);\n  const [zoom, setZoom] = useState(1.0);\n  const [pan, setPan] = useState({ x: 0, y: 0 });\n  const [isPanning, setIsPanning] = useState(false);\n  const [lastPanPos, setLastPanPos] = useState({ x: 0, y: 0 });\n\n  const calculateBounds = useCallback((points) => {\n    if (points.length === 0) return { minX: 0, maxX: 0, minY: 0, maxY: 0, centerX: 0, centerY: 0, width: 0, height: 0 };\n\n    const xCoords = points.map(p => p[0]);\n    const yCoords = points.map(p => p[1]);\n    \n    const minX = Math.min(...xCoords);\n    const maxX = Math.max(...xCoords);\n    const minY = Math.min(...yCoords);\n    const maxY = Math.max(...yCoords);\n\n    return {\n      minX,\n      maxX,\n      minY,\n      maxY,\n      centerX: (minX + maxX) / 2,\n      centerY: (minY + maxY) / 2,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  }, []);\n\n  const drawAxes = useCallback((ctx, centerX, centerY, scale) => {\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\n    ctx.lineWidth = 1;\n    \n    // X axis\n    ctx.beginPath();\n    ctx.moveTo(centerX - 50, centerY);\n    ctx.lineTo(centerX + 50, centerY);\n    ctx.stroke();\n    \n    // Y axis\n    ctx.beginPath();\n    ctx.moveTo(centerX, centerY - 50);\n    ctx.lineTo(centerX, centerY + 50);\n    ctx.stroke();\n    \n    // Labels\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';\n    ctx.font = '8px Inter, sans-serif';\n    ctx.textAlign = 'center';\n    ctx.fillText('X', centerX + 55, centerY + 3);\n    ctx.fillText('Y', centerX + 3, centerY - 55);\n  }, []);\n\n  const drawPathOverlay = useCallback((ctx, rect, imgX = 0, imgY = 0, imgWidth = 0, imgHeight = 0) => {\n\n    const points = pathData.visualization.points;\n    const connections = pathData.visualization.connections;\n\n    if (!points || points.length === 0) return;\n\n    // Calculate bounds\n    const bounds = calculateBounds(points);\n    const scale = Math.min(rect.width, rect.height) / Math.max(bounds.width, bounds.height) * 0.8;\n    const centerX = rect.width / 2;\n    const centerY = rect.height / 2;\n\n    // Project 3D points to 2D with view mode consideration\n    const projectedPoints = points.map(point => {\n      const [x, y, z] = point;\n      \n      if (showOnImage && analysisResult && analysisResult.image_url) {\n        // When showing on image, map path coordinates to image space\n        // Path coordinates are in image pixel space (x, y, z=0)\n        // We need to scale them to match the displayed image size\n        \n        // Get the original image dimensions from the analysis result\n        const originalWidth = analysisResult.metadata?.image_size?.[1] || bounds.width;\n        const originalHeight = analysisResult.metadata?.image_size?.[0] || bounds.height;\n        \n        // Scale the path coordinates to match the displayed image\n        const scaleX = imgWidth / originalWidth;\n        const scaleY = imgHeight / originalHeight;\n        \n        // Apply scaling and positioning\n        const imageX = imgX + x * scaleX;\n        const imageY = imgY + y * scaleY;\n        \n        console.log('Path point mapping:', {\n          originalPoint: [x, y, z],\n          originalImageSize: [originalWidth, originalHeight],\n          displayImageSize: [imgWidth, imgHeight],\n          scale: [scaleX, scaleY],\n          imagePosition: [imgX, imgY],\n          mappedPoint: [imageX, imageY]\n        });\n        \n        return { x: imageX, y: imageY, z: 0 };\n      }\n      \n      if (viewMode === '2d') {\n        // Simple 2D projection (ignore Z) with zoom and pan\n        const projectedX = centerX + (x - bounds.centerX) * scale * zoom + pan.x;\n        const projectedY = centerY + (y - bounds.centerY) * scale * zoom + pan.y;\n        return { x: projectedX, y: projectedY, z: 0 };\n      } else {\n        // 3D perspective projection with rotation (improved) and zoom\n        const cosX = Math.cos(rotation.x * 0.5);\n        const sinX = Math.sin(rotation.x * 0.5);\n        const cosY = Math.cos(rotation.y * 0.5);\n        const sinY = Math.sin(rotation.y * 0.5);\n        \n        // Apply rotation with better scaling\n        const rotatedX = x * cosY - z * sinY;\n        const rotatedY = y * cosX + (x * sinY + z * cosY) * sinX;\n        const rotatedZ = (x * sinY + z * cosY) * cosX - y * sinX;\n        \n        // Perspective projection with better depth handling and zoom\n        const perspective = 1000;\n        const depth = Math.max(1, rotatedZ + perspective);\n        const projectedX = centerX + (rotatedX / depth) * scale * 200 * zoom + pan.x;\n        const projectedY = centerY + (rotatedY / depth) * scale * 200 * zoom + pan.y;\n        \n        return { x: projectedX, y: projectedY, z: rotatedZ };\n      }\n    });\n\n    // Draw connections\n    ctx.strokeStyle = 'rgba(0, 255, 255, 0.6)';\n    ctx.lineWidth = 2;\n    ctx.setLineDash([5, 5]);\n    \n    for (const connection of connections) {\n      const [startIdx, endIdx] = connection;\n      if (startIdx < projectedPoints.length && endIdx < projectedPoints.length) {\n        const start = projectedPoints[startIdx];\n        const end = projectedPoints[endIdx];\n        \n        ctx.beginPath();\n        ctx.moveTo(start.x, start.y);\n        ctx.lineTo(end.x, end.y);\n        ctx.stroke();\n      }\n    }\n\n    // Reset line dash\n    ctx.setLineDash([]);\n\n    // Draw points\n    projectedPoints.forEach((point, index) => {\n      const isStart = index === 0;\n      const isEnd = index === projectedPoints.length - 1;\n      const metadata = pathData.visualization.metadata?.[index - 1]; // -1 because start point has no metadata\n      \n\n      let color, radius;\n      \n      if (isStart) {\n        color = '#00ff00';\n        radius = 8;\n      } else if (isEnd && projectedPoints.length > 2) {\n        color = '#ff0000';\n        radius = 8;\n      } else {\n        // Intermediate debris points\n        const isFeasible = metadata?.feasible;\n        color = isFeasible ? '#00ffff' : '#ff8800';\n        radius = 6;\n      }\n\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.arc(point.x, point.y, radius, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Draw labels\n      if (isStart || isEnd || (metadata && metadata.feasible)) {\n        ctx.fillStyle = color;\n        ctx.font = '10px Inter, sans-serif';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'bottom';\n        \n        const label = isStart ? 'START' : \n                     isEnd && projectedPoints.length > 2 ? 'END' :\n                     metadata ? `D${metadata.debris_id || index}` :\n                     `D${index}`;\n        \n        ctx.fillText(label, point.x, point.y - radius - 10);\n      }\n    });\n\n    // Draw coordinate axes (only in 3D mode and not on image)\n    if (viewMode === '3d' && !showOnImage) {\n    drawAxes(ctx, centerX, centerY, scale);\n    }\n  }, [pathData, viewMode, rotation, showOnImage, zoom, pan, analysisResult, calculateBounds, drawAxes]);\n\n  const drawPath = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !pathData.visualization) return;\n\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    const dpr = window.devicePixelRatio || 1;\n    canvas.width = rect.width * dpr;\n    canvas.height = rect.height * dpr;\n    ctx.scale(dpr, dpr);\n    canvas.style.width = rect.width + 'px';\n    canvas.style.height = rect.height + 'px';\n\n        // Clear canvas or draw background image\n        if (showOnImage && analysisResult && analysisResult.image_url) {\n          console.log('Drawing image with path overlay:', {\n            showOnImage,\n            imageUrl: analysisResult.image_url,\n            imageSize: analysisResult.metadata?.image_size,\n            pathData: pathData.visualization\n          });\n          \n          // Draw the original image as background with zoom and pan\n          const img = new Image();\n          img.onload = () => {\n            // Calculate image dimensions with zoom\n            const imgWidth = img.width * zoom;\n            const imgHeight = img.height * zoom;\n            \n            // Calculate image position with pan\n            const imgX = (rect.width - imgWidth) / 2 + pan.x;\n            const imgY = (rect.height - imgHeight) / 2 + pan.y;\n            \n            console.log('Image loaded, dimensions:', {\n              originalWidth: img.width,\n              originalHeight: img.height,\n              displayWidth: imgWidth,\n              displayHeight: imgHeight,\n              imgX,\n              imgY\n            });\n            \n            // Clear canvas\n            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';\n            ctx.fillRect(0, 0, rect.width, rect.height);\n            \n            // Draw image with zoom and pan\n            ctx.drawImage(img, imgX, imgY, imgWidth, imgHeight);\n            \n            // Draw path overlay with same zoom and pan\n            drawPathOverlay(ctx, rect, imgX, imgY, imgWidth, imgHeight);\n          };\n          img.onerror = (error) => {\n            console.error('Failed to load image:', error, analysisResult.image_url);\n          };\n          img.src = analysisResult.image_url;\n          return;\n        } else {\n          // Clear canvas with background\n          ctx.fillStyle = viewMode === '3d' ? 'rgba(0, 0, 20, 0.3)' : 'rgba(0, 0, 0, 0.1)';\n          ctx.fillRect(0, 0, rect.width, rect.height);\n        }\n\n    drawPathOverlay(ctx, rect);\n  }, [pathData, viewMode, showOnImage, zoom, pan, analysisResult, drawPathOverlay]);\n\n  useEffect(() => {\n    if (pathData && pathData.visualization) {\n      drawPath();\n    }\n  }, [pathData, viewMode, rotation, showOnImage, zoom, pan, drawPath]);\n\n  // Add non-passive wheel event listener\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const handleWheel = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const delta = e.deltaY > 0 ? 0.9 : 1.1;\n      setZoom(prev => Math.max(0.1, Math.min(10, prev * delta)));\n    };\n\n    // Add event listener with passive: false\n    canvas.addEventListener('wheel', handleWheel, { passive: false });\n\n    return () => {\n      canvas.removeEventListener('wheel', handleWheel);\n    };\n  }, []);\n\n  const handleCanvasMouseMove = (e) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const rect = canvas.getBoundingClientRect();\n    \n    if (isPanning) {\n      // Handle panning\n      const deltaX = e.clientX - lastPanPos.x;\n      const deltaY = e.clientY - lastPanPos.y;\n      \n      setPan(prev => ({\n        x: prev.x + deltaX,\n        y: prev.y + deltaY\n      }));\n      \n      setLastPanPos({ x: e.clientX, y: e.clientY });\n    } else if (viewMode === '3d' && !showOnImage) {\n      // Handle 3D rotation\n    const x = (e.clientX - rect.left) / rect.width;\n    const y = (e.clientY - rect.top) / rect.height;\n    \n    setRotation({\n      x: (y - 0.5) * Math.PI,\n      y: (x - 0.5) * Math.PI\n    });\n    }\n  };\n\n  const handleCanvasMouseDown = (e) => {\n    if (e.button === 1 || (e.button === 0 && e.ctrlKey)) {\n      // Middle mouse or Ctrl+left click for panning\n      setIsPanning(true);\n      setLastPanPos({ x: e.clientX, y: e.clientY });\n      e.preventDefault();\n    } else if (e.button === 0 && viewMode === '3d' && !showOnImage) {\n      // Left click for 3D rotation\n      // setIsDragging(true);\n      // setLastMousePos({ x: e.clientX, y: e.clientY });\n    }\n  };\n\n  const handleCanvasMouseUp = () => {\n    // setIsDragging(false);\n    setIsPanning(false);\n  };\n\n\n  const resetView = () => {\n    setZoom(1.0);\n    setPan({ x: 0, y: 0 });\n    setRotation({ x: 0, y: 0 });\n  };\n\n  if (!pathData || !pathData.visualization) {\n    return (\n      <VisualizationContainer>\n        <VisualizationHeader>\n          <VisualizationTitle>üó∫Ô∏è Path Visualization</VisualizationTitle>\n        </VisualizationHeader>\n        <div style={{ textAlign: 'center', padding: '40px', color: 'rgba(255, 255, 255, 0.5)' }}>\n          No path data available\n        </div>\n      </VisualizationContainer>\n    );\n  }\n\n  const metrics = pathData.metrics || {};\n\n  return (\n    <VisualizationContainer>\n      <VisualizationHeader>\n        <VisualizationTitle>üó∫Ô∏è Path Visualization</VisualizationTitle>\n        <ViewControls>\n          <ViewButton \n            active={viewMode === '3d'} \n            onClick={() => setViewMode('3d')}\n          >\n            3D View\n          </ViewButton>\n          <ViewButton \n            active={viewMode === '2d'} \n            onClick={() => setViewMode('2d')}\n          >\n            2D View\n          </ViewButton>\n          <ViewButton \n            active={showOnImage} \n            onClick={() => setShowOnImage(!showOnImage)}\n          >\n            üì∏ On Image\n          </ViewButton>\n          <ViewButton \n            onClick={() => setZoom(prev => Math.min(10, prev * 1.2))}\n            title=\"Zoom In\"\n          >\n            üîç+\n          </ViewButton>\n          <ViewButton \n            onClick={() => setZoom(prev => Math.max(0.1, prev * 0.8))}\n            title=\"Zoom Out\"\n          >\n            üîç-\n          </ViewButton>\n          <ViewButton \n            onClick={resetView}\n            title=\"Reset View\"\n          >\n            üè† Reset\n          </ViewButton>\n        </ViewControls>\n      </VisualizationHeader>\n\n      <CanvasContainer>\n        <Canvas\n          ref={canvasRef}\n          onMouseMove={handleCanvasMouseMove}\n          onMouseDown={handleCanvasMouseDown}\n          onMouseUp={handleCanvasMouseUp}\n          style={{ touchAction: 'none' }}\n        />\n      </CanvasContainer>\n\n      <Legend>\n        <LegendItem>\n          <LegendColor color=\"#00ff00\" />\n          <span>Start Position</span>\n        </LegendItem>\n        <LegendItem>\n          <LegendColor color=\"#00ffff\" />\n          <span>Feasible Debris</span>\n        </LegendItem>\n        <LegendItem>\n          <LegendColor color=\"#ffaa00\" />\n          <span>Non-feasible</span>\n        </LegendItem>\n        <LegendItem>\n          <LegendColor color=\"#ff0000\" />\n          <span>End Position</span>\n        </LegendItem>\n        <LegendItem>\n          <div style={{ width: '12px', height: '2px', background: 'rgba(0, 255, 255, 0.6)', margin: '5px 0' }}></div>\n          <span>Path Connection</span>\n        </LegendItem>\n        <LegendItem>\n          <span>üîç Zoom: {Math.round(zoom * 100)}%</span>\n        </LegendItem>\n        <LegendItem>\n          <span>Controls: Scroll=Zoom, Ctrl+Drag=Pan, Drag=Rotate(3D)</span>\n        </LegendItem>\n        {showOnImage && (\n          <LegendItem>\n            <span>üì∏ Image Mode: Zoom and pan work with the image</span>\n          </LegendItem>\n        )}\n      </Legend>\n\n      <PathInfo>\n        <InfoCard>\n          <InfoLabel>Path Length</InfoLabel>\n          <InfoValue>{pathData.path_length || 0} steps</InfoValue>\n        </InfoCard>\n        \n        <InfoCard>\n          <InfoLabel>Total Distance</InfoLabel>\n          <InfoValue>{metrics.total_distance ? `${(metrics.total_distance / 1000).toFixed(1)} km` : '0 km'}</InfoValue>\n        </InfoCard>\n        \n        <InfoCard>\n          <InfoLabel>Mission Time</InfoLabel>\n          <InfoValue>{metrics.total_time ? `${(metrics.total_time / 3600).toFixed(1)} hours` : '0 hours'}</InfoValue>\n        </InfoCard>\n        \n        <InfoCard>\n          <InfoLabel>Fuel Required</InfoLabel>\n          <InfoValue>{metrics.total_fuel ? `${metrics.total_fuel.toFixed(1)} kg` : '0 kg'}</InfoValue>\n        </InfoCard>\n      </PathInfo>\n\n      <PathSteps>\n        <h4 style={{ color: '#ffffff', marginBottom: '10px', fontSize: '14px' }}>\n          Path Steps:\n        </h4>\n        \n        {pathData.path?.map((step, index) => (\n          <StepItem \n            key={index}\n            color={index === 0 ? '#00ff00' : index === pathData.path.length - 1 ? '#ff0000' : '#00ffff'}\n          >\n            <strong>Step {step.step}:</strong> {index === 0 ? 'Start' : `Debris ${step.debris_id}`} \n            {step.distance_from_previous && (\n              <span style={{ float: 'right', color: 'rgba(255, 255, 255, 0.6)' }}>\n                {step.distance_from_previous.toFixed(1)}m\n              </span>\n            )}\n          </StepItem>\n        ))}\n      </PathSteps>\n    </VisualizationContainer>\n  );\n}\n\nexport default PathVisualization;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}